{"version":3,"file":"commonHelpers.js","sources":["../src/js/home_js/exercises_filters.js","../src/js/home_js/exercises_pagination.js"],"sourcesContent":["import axios from 'axios';\n\nconst filterButtons = document.querySelector('.filter-buttons');\nconst exerciseFiltersList = document.querySelector('.exercise-filters-list');\nconst pagination = document.querySelector('.pagination');\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nlet filterValueDefault = 'Muscles';\nlet currentPage = 1;\nlet screenWidth = window.innerWidth;\nlet currentLimit = 0;\n\nfilterButtons.addEventListener('click', filterBtnClick);\n\nif (screenWidth <= 375) {\n  currentLimit = 8;\n} else if (screenWidth <= 768) {\n  currentLimit = 12;\n} else {\n  currentLimit = 12;\n}\n\nasync function getExercises() {\n  try {\n    const response = await axios.get(`${BASE_URL}/filters`, {\n      params: {\n        filter: filterValueDefault,\n        page: currentPage,\n        limit: currentLimit,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function filterBtnClick(event) {\n  event.preventDefault();\n  currentPage = 1;\n  const filterValue = event.target;\n  const qwer = filterValue.dataset.filter;\n  filterValueDefault = qwer;\n  exerciseFiltersList.innerHTML = '';\n  if (event.target.tagName !== 'BUTTON') {\n    return;\n  }\n  try {\n    getExercises(qwer).then(data => {\n      const { results, totalPages, page } = data;\n      markupExercises(results);\n      if (totalPages > 1) {\n        const pag = paginationPages(page, totalPages);\n        pagination.innerHTML = pag;\n      } else {\n        pagination.innerHTML = '';\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction markupExercises(results) {\n  const markup = results\n    .map(\n      ({\n        name,\n        filter,\n        imgUrl,\n      }) => ` <li class=\"filter-list ExercisesItem\" data-filter='${filter}' data-name='${name}'>\n        <img class=\"img-exercises\" src=\"${imgUrl}\" alt=\"${filter}\">\n        <div class=\"filter-text\">\n          <p class=\"filter-exercises\">${name}</p>\n          <p class=\"filter-name\">${filter}</p>\n        </div>\n      </li>`\n    )\n    .join('');\n  exerciseFiltersList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction paginationPages(page, totalPages) {\n  let paginationHtml = '';\n  for (let i = 1; i <= totalPages; i += 1) {\n    paginationHtml += `<button class=\"pagination-btn\" type=\"button\">${i}</button>`;\n  }\n  return paginationHtml;\n}\n\nasync function onPaginationPages(e) {\n  currentPage = e.target.textContent;\n  exerciseFiltersList.innerHTML = '';\n  try {\n    const { results, page, totalPages } = await getExercises();\n    const filter = results[0].filter;\n\n    if (page === totalPages) {\n      return;\n    }\n    markupExercises(results);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\npagination.addEventListener('click', onPaginationPages);\n","import axios from 'axios';\nconst filterButtons = document.querySelector('.filter-buttons');\nconst exerciseFiltersList = document.querySelector('.exercise-filters-list');\nconst ExercisesHead = document.querySelector('.ExercisesHead');\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nexerciseFiltersList.addEventListener('click', onCardClick);\n\nasync function onCardClick(event) {\n  if (event.target === event.currentTarget) {\n    return;\n  }\n  // при кліку на картку додаємо клас до ul (бо він має інші стилі)\n  exerciseFiltersList.classList.add('ExerciseCategoryList');\n  // при кліку на картку шукаємо найближчий елемент у якого буде заданий селектор (це li)\n  const liEl = event.target.closest('.ExercisesItem');\n  console.log(liEl);\n  // тепер можемо отримати li дата-атрибути\n  const filterValue = liEl.dataset.filter;\n  const nameValue = liEl.dataset.name;\n  console.log(filterValue); //Muscles\n  console.log(nameValue); // abductors\n  // передаємо ці атрибути в функцію , яка робить запит\n  try {\n    const data = await getExercisesByFilter(filterValue, nameValue);\n    // це буде масив об'єктів\n    exerciseFiltersList.innerHTML = createMarkUp(data);\n    ExercisesHead.innerHTML = updateExercisesHeaderMarkup(nameValue);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function getExercisesByFilter(filterValue, nameValue) {\n  // в запиті можливі три ключі, тому відповідно до значення фільтра пишемо цей ключ\n  try {\n    if (filterValue === 'Muscles') {\n      const response = await axios.get(`${BASE_URL}/exercises`, {\n        params: {\n          muscles: nameValue,\n        },\n      });\n      return response.data.results;\n    } else if (filterValue === 'Body parts') {\n      const response = await axios.get(`${BASE_URL}/exercises`, {\n        params: {\n          bodypart: nameValue,\n        },\n      });\n      return response.data.results;\n    } else {\n      const response = await axios.get(`${BASE_URL}/exercises`, {\n        params: {\n          equipment: nameValue,\n        },\n      });\n      return response.data.results;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createMarkUp(array) {\n  const markup = array\n    .map(({ rating, name, burnedCalories, time, bodyPart, target }) => {\n      return `<li class=\"WorkoutCard\">\n      <div class='CardHeader'>\n        <div class='WorkoutWrapper'>\n          <p class='Workout'>workout</p>\n          <div class='RatingWrapper'><p>${rating}</p>\n          <svg class='StarIcon' width='13' height='13'>\n          <use href='/src/img/symbol-defs.svg#icon-star'></use>\n        </svg></div>\n        </div>\n        <div class='StartBtn'>\n          <p>Start</p>\n          <svg width='13' height='13'>\n          <use href='/src/img/symbol-defs.svg#icon-arrow'></use>\n        </svg>\n        </div>\n      </div>\n      <div class='CardMainPart'>\n      <div class='RunIconWrapper'><svg width='14' height='14'>\n          <use href='/src/img/symbol-defs.svg#icon-running'></use>\n        </svg></div>\n        <p class='MainPartName'>${name}</p>\n      </div>\n      <ul class=\"CardFooter\">\n        <li>\n          <p class='CardFooterTextDescr'>Burned calories: <span class='CardFooterTextValue'>${burnedCalories} / ${time} min</span></p>\n        </li>\n        <li>\n          <p class='CardFooterTextDescr'>Body part: <span class='CardFooterTextValue'>${bodyPart}</span></p>\n        </li>\n        <li>\n          <p class='CardFooterTextDescr'>Target: <span class='CardFooterTextValue'>${target}</span></p>\n        </li>\n      </ul>\n    </li>`;\n    })\n    .join('');\n  return markup;\n}\n\nfunction updateExercisesHeaderMarkup(nameValue) {\n  return `<div>\n  <h2 class=\"title-exercises\">Exercises / <span class=\"NameValue\"> ${nameValue}</span></h2>\n  <div class=\"ExercisesHeared\">\n  <div class=\"list-exercises filter-buttons\">\n    <button class=\"item-exercises\" data-filter=\"Muscles\">Muscles</button>\n    <button class=\"item-exercises\" data-filter=\"Body parts\">Body parts</button>\n    <button class=\"item-exercises\" data-filter=\"Equipment\">Equipment</button>\n  </div>\n    <form action=\"\" class=\"ExercisesForm\">\n      <label for=\"#search\" class=\"visually-hidden\">Search</label>\n      <input class='SearchInput' name=\"search\" placeholder=\"Search\" type=\"search\" id=\"search\" />\n      <button class='SearchButton' type=\"submit\">\n        <svg class='IconSearch' width='18' height='18'>\n          <use href='/src/img/symbol-defs.svg#icon-search'></use>\n        </svg>\n      </button>\n    </form></div>\n</div>\n`;\n}\n"],"names":["filterButtons","exerciseFiltersList","pagination","BASE_URL","filterValueDefault","currentPage","screenWidth","currentLimit","filterBtnClick","getExercises","axios","error","event","qwer","data","results","totalPages","page","markupExercises","pag","paginationPages","markup","name","filter","imgUrl","paginationHtml","i","onPaginationPages","e","ExercisesHead","onCardClick","liEl","filterValue","nameValue","getExercisesByFilter","createMarkUp","updateExercisesHeaderMarkup","array","rating","burnedCalories","time","bodyPart","target"],"mappings":"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"}