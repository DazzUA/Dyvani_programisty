{"version":3,"file":"commonHelpers.js","sources":["../src/js/home_js/exercises_filters.js","../src/js/home_js/exercises_pagination.js","../src/js/home_js/footer.js"],"sourcesContent":["import axios from 'axios';\n\nconst filterButtons = document.querySelector('.filter-buttons');\nconst exerciseFiltersList = document.querySelector('.exercise-filters-list');\nconst pagination = document.querySelector('.pagination');\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nlet filterValueDefault = 'Muscles';\nlet currentPage = 1;\nlet screenWidth = window.innerWidth;\nlet currentLimit = 0;\n\nfilterButtons.addEventListener('click', filterBtnClick);\n\nif (screenWidth <= 375) {\n  currentLimit = 8;\n} else if (screenWidth <= 768) {\n  currentLimit = 12;\n} else {\n  currentLimit = 12;\n}\n\nasync function getExercises() {\n  try {\n    const response = await axios.get(`${BASE_URL}/filters`, {\n      params: {\n        filter: filterValueDefault,\n        page: currentPage,\n        limit: currentLimit,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function filterBtnClick(event) {\n  event.preventDefault();\n  currentPage = 1;\n  const filterValue = event.target;\n  const qwer = filterValue.dataset.filter;\n  filterValueDefault = qwer;\n  exerciseFiltersList.innerHTML = '';\n  if (event.target.tagName !== 'BUTTON') {\n    return;\n  }\n  try {\n    getExercises(qwer).then(data => {\n      const { results, totalPages, page } = data;\n      markupExercises(results);\n      if (totalPages > 1) {\n        const pag = paginationPages(page, totalPages);\n        pagination.innerHTML = pag;\n      } else {\n        pagination.innerHTML = '';\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction markupExercises(results) {\n  const markup = results\n    .map(\n      ({\n        name,\n        filter,\n        imgUrl,\n      }) => ` <li class=\"filter-list ExercisesItem\" data-filter='${filter}' data-name='${name}'>\n        <img class=\"img-exercises\" src=\"${imgUrl}\" alt=\"${filter}\">\n        <div class=\"filter-text\">\n          <p class=\"filter-exercises\">${name}</p>\n          <p class=\"filter-name\">${filter}</p>\n        </div>\n      </li>`\n    )\n    .join('');\n  exerciseFiltersList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction paginationPages(page, totalPages) {\n  let paginationHtml = '';\n  for (let i = 1; i <= totalPages; i += 1) {\n    paginationHtml += `<button class=\"pagination-btn\" type=\"button\">${i}</button>`;\n  }\n  return paginationHtml;\n}\n\nasync function onPaginationPages(e) {\n  currentPage = e.target.textContent;\n  exerciseFiltersList.innerHTML = '';\n  try {\n    const { results, page, totalPages } = await getExercises();\n    const filter = results[0].filter;\n\n    if (page === totalPages) {\n      return;\n    }\n    markupExercises(results);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\npagination.addEventListener('click', onPaginationPages);\n","import axios from 'axios';\nconst filterButtons = document.querySelector('.filter-buttons');\nconst exerciseFiltersList = document.querySelector('.exercise-filters-list');\nconst ExercisesHead = document.querySelector('.ExercisesHead');\nconst pagination = document.querySelector('.pagination');\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api';\nexerciseFiltersList.addEventListener('click', onCardClick);\n\nasync function onCardClick(event) {\n  if (event.target === event.currentTarget) {\n    return;\n  }\n  // при кліку на картку додаємо клас до ul (бо він має інші стилі)\n  exerciseFiltersList.classList.add('ExerciseCategoryList');\n  // при кліку на картку шукаємо найближчий елемент у якого буде заданий селектор (це li)\n  const liEl = event.target.closest('.ExercisesItem');\n  console.log(liEl);\n  // тепер можемо отримати li дата-атрибути\n  const filterValue = liEl.dataset.filter;\n  const nameValue = liEl.dataset.name;\n  console.log(filterValue); //Muscles\n  console.log(nameValue); // abductors\n  // передаємо ці атрибути в функцію , яка робить запит\n  try {\n    const data = await getExercisesByFilter(filterValue, nameValue);\n    // це буде масив об'єктів\n    console.log(data);\n    exerciseFiltersList.innerHTML = createMarkUp(data.results);\n    ExercisesHead.innerHTML = updateExercisesHeaderMarkup(nameValue);\n    // ------------------------------new\n    const ExercisesForm = document.querySelector('.ExercisesForm');\n    ExercisesForm.addEventListener(\n      'submit',\n      onFormSubmit(filterValue, nameValue)\n    );\n    // -------------------------------new\n    const FilterBtn = document.querySelector('#FilterBtn');\n    console.log(FilterBtn);\n    FilterBtn.addEventListener('click', onBtnClick);\n    // пагінація\n    pagination.innerHTML = '';\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function getExercisesByFilter(filterValue, nameValue) {\n  // в запиті можливі три ключі, тому відповідно до значення фільтра пишемо цей ключ\n  try {\n    if (filterValue === 'Muscles') {\n      const response = await axios.get(`${BASE_URL}/exercises`, {\n        params: {\n          muscles: nameValue,\n        },\n      });\n      return response.data;\n    } else if (filterValue === 'Body parts') {\n      const response = await axios.get(`${BASE_URL}/exercises`, {\n        params: {\n          bodypart: nameValue,\n        },\n      });\n      return response.data;\n    } else {\n      const response = await axios.get(`${BASE_URL}/exercises`, {\n        params: {\n          equipment: nameValue,\n        },\n      });\n      return response.data;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction createMarkUp(array) {\n  const markup = array\n    .map(({ rating, name, burnedCalories, time, bodyPart, target }) => {\n      return `<li class=\"WorkoutCard\">\n      <div class='CardHeader'>\n        <div class='WorkoutWrapper'>\n          <p class='Workout'>workout</p>\n          <div class='RatingWrapper'><p>${rating}</p>\n          <svg class='StarIcon' width='13' height='13'>\n          <use href='./img/symbol-defs.svg#icon-star'></use>\n        </svg></div>\n        </div>\n        <div class='StartBtn'>\n          <p>Start</p>\n          <svg width='13' height='13'>\n          <use href='./img/symbol-defs.svg#icon-arrow'></use>\n        </svg>\n        </div>\n      </div>\n      <div class='CardMainPart'>\n      <div class='RunIconWrapper'><svg width='14' height='14'>\n          <use href='./img/symbol-defs.svg#icon-running'></use>\n        </svg></div>\n        <p class='MainPartName'>${name}</p>\n      </div>\n      <ul class=\"CardFooter\">\n        <li>\n          <p class='CardFooterTextDescr'>Burned calories: <span class='CardFooterTextValue'>${burnedCalories} / ${time} min</span></p>\n        </li>\n        <li>\n          <p class='CardFooterTextDescr'>Body part: <span class='CardFooterTextValue'>${bodyPart}</span></p>\n        </li>\n        <li>\n          <p class='CardFooterTextDescr'>Target: <span class='CardFooterTextValue'>${target}</span></p>\n        </li>\n      </ul>\n      \n    </li>`;\n    })\n    .join('');\n  return markup;\n}\n\nfunction updateExercisesHeaderMarkup(nameValue) {\n  return `<div>\n  <h2 class=\"title-exercises\">Exercises / <span class=\"NameValue\"> ${nameValue}</span></h2>\n  <div class=\"ExercisesHeared\">\n  <div class=\"list-exercises filter-buttons\" id='FilterBtn'>\n    <button class=\"item-exercises\" data-filter=\"Muscles\">Muscles</button>\n    <button class=\"item-exercises\" data-filter=\"Body parts\">Body parts</button>\n    <button class=\"item-exercises\" data-filter=\"Equipment\">Equipment</button>\n  </div>\n    <form action=\"\" class=\"ExercisesForm\">\n      <label for=\"#search\" class=\"visually-hidden\">Search</label>\n      <input class='SearchInput' name=\"search\" placeholder=\"Search\" type=\"search\" id=\"search\" />\n      <button class='SearchButton' type=\"submit\">\n        <svg class='IconSearch' width='18' height='18'>\n          <use href='./img/symbol-defs.svg#icon-search'></use>\n        </svg>\n      </button>\n    </form></div>\n</div>\n`;\n}\n// ---------------------------------------------------------------------------------------------------------------------\n\n// тут має бути код для реалізації кліку назад на фільтри\n\n// це виклик функції Данила. Треба щоб він зробив експорт\nasync function onBtnClick(event) {\n  if (event.target === event.currentTarget) {\n    return;\n  }\n  // дістаємо значення дата-атрибута елемента, на який клацнули\n  const filterValue = event.target.dataset.filter;\n  console.log(filterValue);\n  // чому робиш пустим ul при виклику функції?\n  // exerciseFiltersList.innerHTML = '';\n  try {\n    const data = await getExercise(filterValue);\n    // передаємо аргументом значення дата атрибута кнопки на яку клікнули\n    exerciseFiltersList.innerHTML = markupExercise(data);\n  } catch (error) {\n    console.log(error);\n  }\n}\n// по замовчувнню значення фільтра буде 'Muscles'\nasync function getExercise(filter = filterValueDefault) {\n  try {\n    const response = await axios.get(`${BASE_URL}/filters`, {\n      params: {\n        filter: filter,\n        page: 1,\n        limit: 20,\n      },\n    });\n    return response.data.results;\n  } catch (error) {\n    console.log(error);\n  }\n}\n// функція отримує масив об'єктів\nfunction markupExercise(results) {\n  const markup = results\n    .map(\n      ({\n        name,\n        filter,\n        imgUrl,\n      }) => ` <li class='ExercisesItem' data-filter='${filter}' data-name='${name}'>\n        <img class=\"img-exercises\" src=\"${imgUrl}\" alt=\"${filter}\">\n        <div>\n          <p>${name}</p>\n          <p>${filter}</p>\n        </div>\n      </li>`\n    )\n    .join('');\n  return markup;\n  // треба іннерhtml, щоб при кліку відбувалась заміна розмітки, а не продовження\n  // exerciseFiltersList.insertAdjacentHTML('beforeend', markup);\n}\n// --------------------------------------------------------------------------------------\n\n// --------------------------------------------------------------------------------------\n\n// пагінація\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nconst refs = {\n  form: document.querySelector('.footerForm'),\n  input: document.querySelector('.formInput'),\n  submit: document.querySelector('.modalButton'),\n};\nconst BASE_URL = 'https://energyflow.b.goit.study/api/subscription';\nconst localStorageKey = 'feedback-form-state';\nconst localFormData = JSON.parse(localStorage.getItem(localStorageKey));\n\nif (localFormData !== null && localFormData !== undefined) {\n  refs.input.value = localFormData.email;\n} else {\n  refs.input.value = '';\n}\n\nrefs.submit.addEventListener('click', searchForm);\nasync function searchForm(event) {\n  const email = refs.input.value.trim();\n  event.preventDefault();\n  try {\n    const response = await axios.post(BASE_URL, {\n      email: email,\n    });\n    iziToast.show({\n      position: 'topRight',\n      message: JSON.stringify(\n        JSON.parse(response.request.responseText).message\n      ),\n      maxWidth: '352',\n      messageColor: '#fff',\n      messageSize: '15px',\n      backgroundColor: 'rgba(27, 27, 27, 0.7)',\n      close: false,\n      closeOnClick: true,\n    });\n    refs.input.value = '';\n  } catch (error) {\n    iziToast.show({\n      position: 'topRight',\n      message: JSON.stringify(JSON.parse(error.request.responseText).message),\n      maxWidth: '352',\n      messageColor: '#fff',\n      messageSize: '15px',\n      backgroundColor: 'rgba(27, 27, 27, 0.7)',\n      close: false,\n      closeOnClick: true,\n    });\n\n    refs.input.value = '';\n  }\n}\n// loader\n// const loaderForm = document.querySelector('.loader');\n// loader для очікування відповіді на клік\n// function showLoader(state = true) {\n//   refs.loaderForm.style.display = !state ? 'none' : 'inline-block';\n//   filterButtons.disabled = state;\n// jjjj}\n"],"names":["filterButtons","exerciseFiltersList","pagination","BASE_URL","filterValueDefault","currentPage","screenWidth","currentLimit","filterBtnClick","getExercises","axios","error","event","qwer","data","results","totalPages","page","markupExercises","pag","paginationPages","markup","name","filter","imgUrl","paginationHtml","i","onPaginationPages","e","ExercisesHead","onCardClick","liEl","filterValue","nameValue","getExercisesByFilter","createMarkUp","updateExercisesHeaderMarkup","FilterBtn","onBtnClick","array","rating","burnedCalories","time","bodyPart","target","getExercise","markupExercise","refs","localStorageKey","localFormData","searchForm","email","response","iziToast"],"mappings":"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"}